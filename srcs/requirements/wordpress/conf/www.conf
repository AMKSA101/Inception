[www]
; PHP-FPM POOL CONFIGURATION
; This file was modified to fix critical PHP-FPM startup errors

; USER AND GROUP: Run PHP-FPM as web server user
user = www-data
group = www-data

; NETWORK CONFIGURATION: Listen on port 9000 for FastCGI connections
; This allows NGINX to communicate with PHP-FPM via TCP
listen = 9000
listen.owner = www-data
listen.group = www-data

; PROCESS MANAGER CONFIGURATION: Dynamic process management
pm = dynamic
pm.max_children = 20

; STARTUP PROCESSES: Initial number of worker processes
pm.start_servers = 5

; SPARE PROCESSES: Minimum idle workers to maintain
pm.min_spare_servers = 5

; CRITICAL FIX: Maximum spare servers reduced from 35 to 15
; ISSUE: pm.max_spare_servers (35) was greater than pm.max_children (20)
; SOLUTION: Set max_spare_servers = 15 (less than max_children)
; This prevents PHP-FPM validation errors and startup failures
pm.max_spare_servers = 15

; TIMEOUT: Kill idle processes after 10 seconds
pm.process_idle_timeout = 10s
